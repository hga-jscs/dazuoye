# 任务重述（230902 JSON 模块提取）

## 目标理解
本任务要求从 Node-RED 风格的 JSON 数组中提取满足规模条件的“子模块”（子图），并将每个子模块以原 JSON 数组形式保存为独立文件。子模块的构建基于两类连接关系：

1. **wires 关系**：节点的 `wires`（默认仅使用 `wires[0]`）表示当前节点到其他节点的有向连接。
2. **属性关系**：若节点的某个属性值是另一个节点的 `id`，则两者之间存在连接关系（可按需忽略指定属性名）。

输出文件按约定命名，如 `module_abc_5_2.json` 表示从 `abc.json` 中抽取的第 2 个、节点数量为 5 的子模块文件。

## 关键约束
- 仅使用当前 JSON 文件中存在的 `id` 进行连接，忽略外部未定义节点。
- 子模块节点数量需在 `[下界, 上界]` 范围内。
- 子模块应当在连接意义上**可达/连通**（可自行设定；本项目默认按无向连通处理）。
- **结点信息封闭**：若子模块内节点存在指向其他节点 `id` 的属性/连线，则该目标节点必须也在子模块内（避免悬空引用）。
- 支持用户指定若干属性名作为“忽略标签”，这些属性产生的连接不参与计算。
- 支持输入为文件或目录；若为目录，则遍历目录内所有非 `module_` 前缀的 JSON 文件并生成模块文件。

## 可行解决路径与子问题拆解

### 子问题 1：JSON 读取与节点建模
- 读取 JSON 数组。
- 提取每个节点的 `id`，构建 `id -> index` 映射。
- 以原始 JSON 对象保留节点信息，方便模块输出时直接复用。

### 子问题 2：连接关系构建
- 解析 `wires` 连接（默认 `wires[0]`）。
- 递归扫描属性值，若发现字符串匹配其他节点的 `id`，则建立有向连接。
- 支持忽略标签：忽略指定属性名及其子结构中的连接。

### 子问题 3：子模块枚举
- 根据 `lower/upper` 范围枚举所有满足条件的子图：
  - 默认使用**无向连通子图枚举**，以减少无意义组合。
  - 同时校验“结点信息封闭”条件（有向连接不得指向子集外节点）。

### 子问题 4：模块写出与命名
- 将子图节点对应的 JSON 对象输出为 JSON 数组。
- 按规范生成文件名（包含忽略标签、规模、序号）。

### 子问题 5：调试输出与可视化
- 输出每个文件的节点列表、连接数量、子模块数量。
- 输出每个生成模块的节点列表，方便人工检查与可视化调试。

### 子问题 6：功能扩展（Plus 配置）
- 通过 `plusconfig.json` 控制额外功能是否启用（例如：
  - 使用全部 `wires`，而不仅是 `wires[0]`。
  - 允许不连通子图生成）。

上述路径兼顾正确性与可调试性，并可扩展用于自动化测试。
