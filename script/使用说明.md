# mytool 使用说明（傻瓜式）

> 适用场景：从 Node-RED 风格 JSON 中枚举满足规模与闭包条件的子图，并输出为 `module_*.json` 文件。

## 1. 运行前准备

1. 确保你的 JSON 文件或目录存在。
2. 如果你希望自定义行为，可以在**输入目录**或**工作目录**中放置 `plusconfig.json`（可选）。

`plusconfig.json` 示例：

```json
{
  "use_all_wires": false,
  "allow_disconnected": false,
  "verbose_debug": true
}
```

- `use_all_wires`：`true` 表示使用 `wires` 的全部分组；`false` 仅使用第一组。
- `allow_disconnected`：`true` 表示允许非连通子图。
- `verbose_debug`：`true` 输出详细调试信息（推荐开启，便于可视化排查）。

## 2. 最简单的运行方式

**命令格式：**

```bash
python3 script/mytool.py <目标文件/目录> <下界> <上界> [忽略标签1 忽略标签2 ...]
```

**例子（目录输入）：**

```bash
python3 script/mytool.py "./json 230902" 3 5
```

**例子（单文件输入）：**

```bash
python3 script/mytool.py ./test/simple.json 2 4
```

## 3. 输出结果在哪里？

输出文件会写回到**输入文件所在目录**，文件名格式如下：

```
module_<原文件名>_<忽略标签拼接>_<规模>_<序号>.json
```

例如：

```
module_simple_z_3_2.json
```

## 4. 忽略标签怎么用？

当 JSON 中的字段名属于“忽略标签”时，该字段下的内容不会参与“节点引用扫描”。

示例：

```bash
python3 script/mytool.py ./json 230902 3 5 labelA labelB
```

## 5. 常见问题（FAQ）

### Q1：没有输出文件？

可能原因：
- `下界/上界` 太严格导致没有子图；
- JSON 格式不正确；
- `plusconfig.json` 里开了某些限制。

### Q2：输出太多，看不清？

把 `plusconfig.json` 中 `verbose_debug` 改为 `false` 即可。

---

如需快速验证是否能跑通，可先使用 `test/` 与 `json 230902/` 目录中的 JSON 文件进行测试。
